{"version":3,"sources":["components/Name.js","components/Names.js","components/Filter.js","services/Persons.js","App.js","index.js"],"names":["Name","person","handleDeletePerson","name","number","onClick","Names","filter","persons","toUpperCase","includes","map","id","Filter","onFilterChange","value","onChange","baseUrl","toObj","request","then","response","data","newObject","axios","post","put","delete","Notification","message","style","isError","content","App","useState","setMessage","setPersons","newName","setNewName","newNum","setNewNum","setFilter","useEffect","get","timer","setTimeout","clearInterval","handleUpdate","console","log","oldPerson","find","p","updatedPerson","personService","returnedPerson","catch","error","handleCreate","newPerson","concat","event","target","onSubmit","preventDefault","some","e","window","confirm","alert","noteObject","num","length","type","n","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1e7e33e5.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Name = ({ person, handleDeletePerson }) => {\r\n  return (\r\n    <li>{person.name}, {person.number}<button onClick={handleDeletePerson}>Poista</button></li>\r\n  )\r\n}\r\n\r\nexport default Name","import React from \"react\"\r\nimport Name from \"./Name\"\r\n\r\nconst Names = ({ filter, persons, handleDeletePerson}) => {\r\n      const caseinsensitiveFilter = (person) => (\r\n      person.name.toUpperCase().includes(\r\n        filter.toUpperCase()\r\n      )\r\n    )\r\n    return (\r\n      <ul>\r\n        {persons\r\n          .filter(caseinsensitiveFilter)\r\n          .map(person => <Name key={person.name} name={person.name} id={person.id} person={person} handleDeletePerson={handleDeletePerson(person.name, person.id)}/>)}\r\n      </ul>\r\n    )\r\n}\r\n\r\n  export default Names","import React from 'react'\r\n\r\nconst Filter = ({filter, onFilterChange}) => {\r\n    return (\r\n      <p>Filter names <input value={filter} onChange={onFilterChange}/></p>\r\n    )\r\n  }\r\n\r\nexport default Filter","import axios from 'axios'\r\n//const baseUrl = 'http://localhost:3001/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return toObj(axios.get(baseUrl))\r\n}\r\n\r\nconst create = newObject => {\r\n  return toObj(axios.post(baseUrl, newObject))\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  return toObj(axios.put(`${baseUrl}/${id}`, newObject))\r\n}\r\n\r\nconst toObj = (request) => {\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n}\r\n\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  deletePerson: deletePerson \r\n}","import React, { useState, useEffect } from 'react'\r\nimport Names from './components/Names'\r\nimport Filter from './components/Filter'\r\nimport axios from 'axios'\r\nimport personService from './services/Persons'\r\n\r\n\r\nconst Notification = ({ message }) => {\r\n\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  const style = {\r\n    \"border-color\": message.isError ? \"red\" : \"green\",\r\n    \"fontSize\": \"16px\",\r\n    \"borderStyle\": \"solid\",\r\n    \"borderRadius\": \"3px\",\r\n    \"padding\": \"10px\",\r\n    \"marginBottom\": \"5px\"\r\n  }\r\n\r\n  return (\r\n    <div style={style}>\r\n      {message.content}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst App = () => {\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNum, setNewNum ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n\r\n  const content = message === null ? null : message.content\r\n  const isError = message === null ? null : message.isError\r\n\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get('/api/persons')\r\n      .then(response => {\r\n        setPersons(response.data)\r\n      })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const clearMessage = () => setMessage(null)\r\n    const timer = setTimeout(clearMessage, 5000)\r\n\r\n    return () => clearInterval(timer)\r\n  }, [content, isError])\r\n\r\n\r\n  const addNameAndNum = (event) => {\r\n    event.preventDefault()\r\n    if (persons.some(e => e.name === newName)) {\r\n          console.log(\"On jo listassa\")\r\n          setNewName('')\r\n          setNewNum('')\r\n          const acceptModification = window.confirm(\r\n            `${newName} on jo listassa, päivitetäänkö numero?`\r\n            )\r\n    \r\n          if (acceptModification) {\r\n            return handleUpdate(newName)\r\n          }\r\n          else return window.alert('Ei muutoksia')\r\n        }\r\n\r\n\r\n    const noteObject = {\r\n        name: newName,\r\n        num: newNum,\r\n        id: persons.length + 1,\r\n      }\r\n    \r\n      handleCreate()\r\n      setPersons(persons.concat(noteObject))\r\n      setNewName('')\r\n      setNewNum('')\r\n  }\r\n\r\n\r\n  const handleUpdate = (name) => {\r\n    console.log(\"mennäänkö tänne kuitenki\")\r\n    const oldPerson = persons.find(p => p.name === name)\r\n    const updatedPerson = {...oldPerson, number: newNum}\r\n\r\n    personService\r\n      .update(updatedPerson.id, updatedPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(\r\n          persons.map(\r\n            person =>\r\n              person.id !== oldPerson.id ? person: returnedPerson\r\n            )\r\n          )\r\n        setMessage({content:`Päivitetty ${updatedPerson.name}.`, isError: false})\r\n        })\r\n      .catch(error => {\r\n        if (error.message === \"Request failed with status code 404\"){\r\n          setMessage({content: `${name} tiedot on jo poistettu`, isError: true})\r\n        } else {\r\n          console.log(\"error message: \" + error.message)\r\n          setMessage({content: error.response.data.error, isError: true})\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n  const handleCreate = () => {\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNum\r\n    }\r\n\r\n    personService\r\n      .create(newPerson)\r\n      .then(newPerson => {\r\n        setPersons(persons.concat(newPerson))\r\n        setMessage({content: `Luotu ${newPerson.name}.`, isError: false})\r\n      })\r\n      .catch(error => {\r\n        setMessage({content: error.response.data.error, isError: true})\r\n      })\r\n\r\n    setNewName('')\r\n    setNewNum('')\r\n  }\r\n\r\n\r\n  const handleDeletePerson = (name, id) => {\r\n    return () => {\r\n      if (window.confirm(`Poistetaanko ${name} ?`)) {\r\n        personService\r\n          .deletePerson(id)\r\n          .then(() => {\r\n            setPersons(persons.filter(n => n.id !== id));\r\n            setMessage({content: `Poistettu ${name}.`, isError: false})\r\n            setNewName(\"\");\r\n            setNewNum(\"\");\r\n          })\r\n          .catch(error => {\r\n            setPersons(persons.filter(n => n.name !== name));\r\n            setMessage({content: `${name} on jo poistettu.`, isError: true})\r\n          });\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n        }, 3000);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNum(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => setFilter(event.target.value)\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Filter filter={filter} onFilterChange={handleFilterChange}/>\r\n      <h2>Puhelinluettelo</h2>\r\n      <Notification message={message} />\r\n      <form onSubmit={addNameAndNum}>\r\n        <div>\r\n          nimi:\r\n          <input\r\n          value={newName}\r\n          onChange={handleNameChange}\r\n        />\r\n        </div>\r\n        <div>numero: \r\n            <input \r\n            value={newNum}\r\n            onChange={handleNumChange}\r\n            />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n      <h2>Numerot</h2>\r\n      <ul>\r\n      <Names\r\n        filter={filter}\r\n        persons={persons}\r\n        handleDeletePerson={handleDeletePerson}\r\n      />\r\n      </ul>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}