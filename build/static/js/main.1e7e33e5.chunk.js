(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t.n(o),i=t(15),u=t.n(i),a=(t(21),t(6)),s=t(4),l=function(e){var n=e.person,t=e.handleDeletePerson;return Object(r.jsxs)("li",{children:[n.name,", ",n.number,Object(r.jsx)("button",{onClick:t,children:"Poista"})]})},j=function(e){var n=e.filter,t=e.persons,o=e.handleDeletePerson;return Object(r.jsx)("ul",{children:t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})).map((function(e){return Object(r.jsx)(l,{name:e.name,id:e.id,person:e,handleDeletePerson:o(e.name,e.id)},e.name)}))})},d=function(e){var n=e.filter,t=e.onFilterChange;return Object(r.jsxs)("p",{children:["Filter names ",Object(r.jsx)("input",{value:n,onChange:t})]})},f=t(3),b=t.n(f),h="/api/persons",m=function(e){return e.then((function(e){return e.data}))},p=function(e){return m(b.a.post(h,e))},O=function(e,n){return m(b.a.put("".concat(h,"/").concat(e),n))},v=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.message;if(null===n)return null;var t={"border-color":n.isError?"red":"green",fontSize:"16px",borderStyle:"solid",borderRadius:"3px",padding:"10px",marginBottom:"5px"};return Object(r.jsx)("div",{style:t,children:n.content})},g=function(){var e=Object(o.useState)(null),n=Object(s.a)(e,2),t=n[0],c=n[1],i=Object(o.useState)([]),u=Object(s.a)(i,2),l=u[0],f=u[1],h=Object(o.useState)(""),m=Object(s.a)(h,2),g=m[0],E=m[1],k=Object(o.useState)(""),w=Object(s.a)(k,2),P=w[0],S=w[1],C=Object(o.useState)(""),y=Object(s.a)(C,2),D=y[0],F=y[1],B=null===t?null:t.content,I=null===t?null:t.isError;Object(o.useEffect)((function(){b.a.get("/api/persons").then((function(e){f(e.data)}))}),[]),Object(o.useEffect)((function(){var e=setTimeout((function(){return c(null)}),5e3);return function(){return clearInterval(e)}}),[B,I]);var J=function(e){console.log("menn\xe4\xe4nk\xf6 t\xe4nne kuitenki");var n=l.find((function(n){return n.name===e})),t=Object(a.a)(Object(a.a)({},n),{},{number:P});O(t.id,t).then((function(e){f(l.map((function(t){return t.id!==n.id?t:e}))),c({content:"P\xe4ivitetty ".concat(t.name,"."),isError:!1})})).catch((function(n){"Request failed with status code 404"===n.message?c({content:"".concat(e," tiedot on jo poistettu"),isError:!0}):(console.log("error message: "+n.message),c({content:n.response.data.error,isError:!0}))}))},R=function(){p({name:g,number:P}).then((function(e){f(l.concat(e)),c({content:"Luotu ".concat(e.name,"."),isError:!1})})).catch((function(e){c({content:e.response.data.error,isError:!0})})),E(""),S("")};return Object(r.jsxs)("div",{children:[Object(r.jsx)(d,{filter:D,onFilterChange:function(e){return F(e.target.value)}}),Object(r.jsx)("h2",{children:"Puhelinluettelo"}),Object(r.jsx)(x,{message:t}),Object(r.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l.some((function(e){return e.name===g})))return console.log("On jo listassa"),E(""),S(""),window.confirm("".concat(g," on jo listassa, p\xe4ivitet\xe4\xe4nk\xf6 numero?"))?J(g):window.alert("Ei muutoksia");var n={name:g,num:P,id:l.length+1};R(),f(l.concat(n)),E(""),S("")},children:[Object(r.jsxs)("div",{children:["nimi:",Object(r.jsx)("input",{value:g,onChange:function(e){console.log(e.target.value),E(e.target.value)}})]}),Object(r.jsxs)("div",{children:["numero:",Object(r.jsx)("input",{value:P,onChange:function(e){console.log(e.target.value),S(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]}),Object(r.jsx)("h2",{children:"Numerot"}),Object(r.jsx)("ul",{children:Object(r.jsx)(j,{filter:D,persons:l,handleDeletePerson:function(e,n){return function(){window.confirm("Poistetaanko ".concat(e," ?"))&&(v(n).then((function(){f(l.filter((function(e){return e.id!==n}))),c({content:"Poistettu ".concat(e,"."),isError:!1}),E(""),S("")})).catch((function(n){f(l.filter((function(n){return n.name!==e}))),c({content:"".concat(e," on jo poistettu."),isError:!0})})),setTimeout((function(){c(null)}),3e3))}}})})]})};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1e7e33e5.chunk.js.map